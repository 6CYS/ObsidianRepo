# 3.4 数据查询与可视化


## F-DATA-01 Text-to-SQL 生成

### 需求描述
系统的核心执行能力，将语义转换为可执行代码。

### 功能要点
1. **物理执行**：通过 API 调用 WrenAI 引擎，输入 MDL 与用户问题。
2. **方言适配**：根据物理数据库类型（Hive, Trino, PG 等）生成相应的 SQL 语法。

---

## F-DATA-02 自动图表推荐

### 需求描述
让数据“开口说话”，自动选择最佳展现形式。

### 功能要点
1. **类型探测**：智能识别结果集特征（如日期轴->折线图，地理信息->地图，类别->柱状图）。
2. **交互渲染**：使用 ECharts 实现动效交互，支持缩放、查看数据点数值。

---

## F-DATA-03 SQL 代码预览与解释

### 需求描述
满足专业用户审核 SQL 与初级用户理解逻辑的需求。

### 功能要点
1. **代码审计**：提供一个“SQL 预览”板块，用户可查看生成的原始代码。
2. **逻辑转译**：使用模型对 SQL 逻辑进行详细的自然语言说明（如：“我为您关联了订单表与客户表，按日期进行了汇总...”）。

---

## F-DATA-04 表格展示辅助

### 需求描述
不仅有图，还需要能看到底层的真实表格数据。

### 功能要点
1. **实时分页**：支持大数据量查询的平滑分页展示。
2. **列自适应**：自动根据字段名称与内容长度调整列宽。

---

## F-DATA-05 异常/空结果处理

### 需求描述
保证系统“不挂起”，给用户明确的引导。

### 功能要点
1. **容错重试**：当执行报错时，尝试自动微调 SQL 并重试（Self-Correction）。
2. **友好提示**：若因元数据缺失或无法查询，明确告知用户缺失的字段，建议用户修改提问。

---

## F-DATA-06 结果数据导出

### 需求描述
方便用户将查询结果离线流转。

### 功能要点
1. **多格式支持**：提供一键导出为标准 Excel 或 CSV 的能力。
2. **完整保留**：确保导出的数据内容与网页展示结果完全一致。
